<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DevOps代码管理 | LBW&#39;s Wiki Pages</title>
    <meta name="description" content="Organize all of my knowledge.">
    <link rel="icon" href="/wiki/lbw-wiki.png">
    
    <link rel="preload" href="/wiki/assets/css/0.styles.08165e7c.css" as="style"><link rel="preload" href="/wiki/assets/js/app.c421db3b.js" as="script"><link rel="preload" href="/wiki/assets/js/2.6eab3bcd.js" as="script"><link rel="preload" href="/wiki/assets/js/29.0beb3286.js" as="script"><link rel="prefetch" href="/wiki/assets/js/10.101534f7.js"><link rel="prefetch" href="/wiki/assets/js/11.8dc910ab.js"><link rel="prefetch" href="/wiki/assets/js/12.538cb227.js"><link rel="prefetch" href="/wiki/assets/js/13.91bcf9c8.js"><link rel="prefetch" href="/wiki/assets/js/14.46db8181.js"><link rel="prefetch" href="/wiki/assets/js/15.6c9d9513.js"><link rel="prefetch" href="/wiki/assets/js/16.18d8290f.js"><link rel="prefetch" href="/wiki/assets/js/17.dc7ef9c0.js"><link rel="prefetch" href="/wiki/assets/js/18.8c4a6f45.js"><link rel="prefetch" href="/wiki/assets/js/19.0c65302c.js"><link rel="prefetch" href="/wiki/assets/js/20.a77d92ec.js"><link rel="prefetch" href="/wiki/assets/js/21.232b5847.js"><link rel="prefetch" href="/wiki/assets/js/22.e379164e.js"><link rel="prefetch" href="/wiki/assets/js/23.1d81ea2d.js"><link rel="prefetch" href="/wiki/assets/js/24.1ee88ec8.js"><link rel="prefetch" href="/wiki/assets/js/25.311782fd.js"><link rel="prefetch" href="/wiki/assets/js/26.2a1c9083.js"><link rel="prefetch" href="/wiki/assets/js/27.ab9ae01f.js"><link rel="prefetch" href="/wiki/assets/js/28.2c05f13f.js"><link rel="prefetch" href="/wiki/assets/js/3.1cb06f8b.js"><link rel="prefetch" href="/wiki/assets/js/30.857352b1.js"><link rel="prefetch" href="/wiki/assets/js/31.a50c5b66.js"><link rel="prefetch" href="/wiki/assets/js/32.885badda.js"><link rel="prefetch" href="/wiki/assets/js/33.ef707ccf.js"><link rel="prefetch" href="/wiki/assets/js/34.5894f25e.js"><link rel="prefetch" href="/wiki/assets/js/35.c2b91725.js"><link rel="prefetch" href="/wiki/assets/js/36.9fba88ad.js"><link rel="prefetch" href="/wiki/assets/js/37.752043da.js"><link rel="prefetch" href="/wiki/assets/js/38.882d7e50.js"><link rel="prefetch" href="/wiki/assets/js/39.3ec66f7c.js"><link rel="prefetch" href="/wiki/assets/js/4.98167148.js"><link rel="prefetch" href="/wiki/assets/js/40.919cf8ba.js"><link rel="prefetch" href="/wiki/assets/js/41.c6f31d63.js"><link rel="prefetch" href="/wiki/assets/js/42.cd99889d.js"><link rel="prefetch" href="/wiki/assets/js/43.9a37a0dc.js"><link rel="prefetch" href="/wiki/assets/js/44.c37374ca.js"><link rel="prefetch" href="/wiki/assets/js/45.346f5370.js"><link rel="prefetch" href="/wiki/assets/js/46.7877739c.js"><link rel="prefetch" href="/wiki/assets/js/47.3369df03.js"><link rel="prefetch" href="/wiki/assets/js/48.069b0408.js"><link rel="prefetch" href="/wiki/assets/js/49.6222591f.js"><link rel="prefetch" href="/wiki/assets/js/5.41eedec9.js"><link rel="prefetch" href="/wiki/assets/js/50.179cbb5d.js"><link rel="prefetch" href="/wiki/assets/js/51.e28d25ba.js"><link rel="prefetch" href="/wiki/assets/js/52.703b7f0e.js"><link rel="prefetch" href="/wiki/assets/js/53.22087103.js"><link rel="prefetch" href="/wiki/assets/js/54.c14c3e30.js"><link rel="prefetch" href="/wiki/assets/js/55.5d3726f9.js"><link rel="prefetch" href="/wiki/assets/js/56.e611b646.js"><link rel="prefetch" href="/wiki/assets/js/57.217ad611.js"><link rel="prefetch" href="/wiki/assets/js/58.b02579c3.js"><link rel="prefetch" href="/wiki/assets/js/59.bcedc9ab.js"><link rel="prefetch" href="/wiki/assets/js/6.3d11f12f.js"><link rel="prefetch" href="/wiki/assets/js/7.e95d627d.js"><link rel="prefetch" href="/wiki/assets/js/8.10751aae.js"><link rel="prefetch" href="/wiki/assets/js/9.e70a3818.js">
    <link rel="stylesheet" href="/wiki/assets/css/0.styles.08165e7c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wiki/" class="home-link router-link-active"><!----> <span class="site-name">LBW's Wiki Pages</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/wiki/overview/" class="nav-link">概览</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wiki/algorithm/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/wiki/operating-system/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/wiki/computer-network/" class="nav-link">计算机网络</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">编程语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wiki/language/java/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/wiki/language/c/" class="nav-link">C/C++</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wiki/backend/tomcat/" class="nav-link">Tomcat</a></li><li class="dropdown-item"><!----> <a href="/wiki/backend/spring/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/wiki/backend/database/" class="nav-link">数据库</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">微服务</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wiki/microservice/" class="nav-link">微服务架构</a></li><li class="dropdown-item"><!----> <a href="/wiki/docker/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/wiki/kubernetes/" class="nav-link">Kubernetes</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wiki/frontend/" class="nav-link">前端</a></li><li class="dropdown-item"><!----> <a href="/wiki/linux/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/wiki/devops/" class="nav-link router-link-active">Dev-Ops</a></li><li class="dropdown-item"><!----> <a href="/wiki/circumvent-internet/" class="nav-link">科学上网</a></li></ul></div></div><div class="nav-item"><a href="https://lebw.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/lebw/my-wiki" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/wiki/overview/" class="nav-link">概览</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wiki/algorithm/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/wiki/operating-system/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/wiki/computer-network/" class="nav-link">计算机网络</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">编程语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wiki/language/java/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/wiki/language/c/" class="nav-link">C/C++</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wiki/backend/tomcat/" class="nav-link">Tomcat</a></li><li class="dropdown-item"><!----> <a href="/wiki/backend/spring/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/wiki/backend/database/" class="nav-link">数据库</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">微服务</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wiki/microservice/" class="nav-link">微服务架构</a></li><li class="dropdown-item"><!----> <a href="/wiki/docker/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/wiki/kubernetes/" class="nav-link">Kubernetes</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wiki/frontend/" class="nav-link">前端</a></li><li class="dropdown-item"><!----> <a href="/wiki/linux/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/wiki/devops/" class="nav-link router-link-active">Dev-Ops</a></li><li class="dropdown-item"><!----> <a href="/wiki/circumvent-internet/" class="nav-link">科学上网</a></li></ul></div></div><div class="nav-item"><a href="https://lebw.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/lebw/my-wiki" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/wiki/devops/DevOps之团队结构.html" class="sidebar-link">DevOps 团队结构</a></li><li><a href="/wiki/devops/DevOps之代码管理.html" class="active sidebar-link">DevOps代码管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wiki/devops/DevOps之代码管理.html#什么是代码管理？" class="sidebar-link">什么是代码管理？</a></li><li class="sidebar-sub-header"><a href="/wiki/devops/DevOps之代码管理.html#为什么需要代码管理？" class="sidebar-link">为什么需要代码管理？</a></li><li class="sidebar-sub-header"><a href="/wiki/devops/DevOps之代码管理.html#代码管理工具简介" class="sidebar-link">代码管理工具简介</a></li><li class="sidebar-sub-header"><a href="/wiki/devops/DevOps之代码管理.html#冲突（conflicts）" class="sidebar-link">冲突（Conflicts）</a></li><li class="sidebar-sub-header"><a href="/wiki/devops/DevOps之代码管理.html#合并（merge-changes）" class="sidebar-link">合并（Merge changes）</a></li><li class="sidebar-sub-header"><a href="/wiki/devops/DevOps之代码管理.html#分支管理" class="sidebar-link">分支管理</a></li><li class="sidebar-sub-header"><a href="/wiki/devops/DevOps之代码管理.html#git-flow" class="sidebar-link">Git Flow</a></li><li class="sidebar-sub-header"><a href="/wiki/devops/DevOps之代码管理.html#参考博客" class="sidebar-link">参考博客</a></li></ul></li><li><a href="/wiki/devops/jenkins-installation.html" class="sidebar-link">Jenkins安装与配置</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="devops代码管理"><a href="#devops代码管理" aria-hidden="true" class="header-anchor">#</a> DevOps代码管理</h1> <h2 id="什么是代码管理？"><a href="#什么是代码管理？" aria-hidden="true" class="header-anchor">#</a> 什么是代码管理？</h2> <p>代码管理（SCM）是程序员用来管理源代码的方法和工具。</p> <p>代码管理用来给程序源代码以版本。每一个版本会有一个时间戳，并且记录提交这个版本的人员和改动的细节。在代码管理系统中，我们甚至可以比较各种版本并将其与其他版本合并。这就是为什么SCM也被称为版本控制或源代码控制的原因。</p> <p>可能你以前也使用过你自己的「版本控制系统」，只是你没有意识到。例如：<code>resume-v1.pdf</code>, <code>resume-v2.pdf</code>，等。</p> <h2 id="为什么需要代码管理？"><a href="#为什么需要代码管理？" aria-hidden="true" class="header-anchor">#</a> 为什么需要代码管理？</h2> <ol><li>作为数据备份。虽然数据备份同样可以用比较笨的方法：本地复制副本，但这种古老的方法有很多不足，无法应对频繁的修改，会照成版本混乱，不便于管理，并且占用空间。</li> <li>版本控制。 版本控制是一种记录一个或若干文件内容变化，以便将来查阅特定版本修订情况以及回溯的系统。 有了它你就可以将某个文件回溯到之前的状态，甚至将整个项目都回退到过去某个时间点的状态，你可以比较文件的变化细节，查出最后是谁修改了哪个地方，从而找出导致怪异问题出现的原因，又是谁在何时报告了某个功能缺陷等等。</li> <li>提高代码质量。在没有代码管理之前，可能经常要在代码里写些不相关的注释，比如：某人某日对某代码进行修改；或是将一些不确定是否使用的代码用注释的形式保留等等,这些也就是僵尸代码啦。现在这些工作都可以交由版本管理工具完成。</li> <li>提高协同、多人开发的效率。及时提交更新代码，能让团队中的成员了解到代码的最新情况，避免重复劳动。</li> <li>明确分工责任。什么时候谁对代码做了修改、修改了什么内容，版本管理都会记录在案，方便查询，追究责任。</li></ol> <h2 id="代码管理工具简介"><a href="#代码管理工具简介" aria-hidden="true" class="header-anchor">#</a> 代码管理工具简介</h2> <p>代码管理工具一般分为两种：集中式和分布式。分布式版本管理系统更加现代化，运行速度更快，有更多的高级特性，但是理解起来稍微复杂一些。你需要评估分布式带来的额外复杂度对于你的项目来说，是否是值得的。</p> <p>比较流行的代码管理工具有 Git（分布式），Mercurial（分布式），Subversion（分布式）。</p> <p>集中式和分布式的代码管理工具的主要区别在于代码仓库的数目。在集中式的代码管理系统中，代码只有一个中心仓库；在分布式系统中，可以同时存在多个代码仓库，如下图所示。</p> <p><img src="https://homes.cs.washington.edu/~mernst/advice/version-control-fig2.png" alt="Centralized version control"></p> <p><img src="https://homes.cs.washington.edu/~mernst/advice/version-control-fig3.png" alt="Distributed version control"></p> <p>在集中式代码管理系统中，虽然每个用户会得到他的 working copy，但是只有一个中心仓库。当你提交commit后，其他人就可以执行update并且看到你的提交了。其他人想要看到你的提交，有两个前提：</p> <ol><li>你成功提交了commit。</li> <li>他们成功执行了update。</li></ol> <p>在分布式代码管理系统中，每个用户都会有他自己的仓库和working copy。在你提交commit后，其他人还是没有办法收到该提交；只有当你把你的提交push到中心仓库后，其他人才有权限访问。另一方面，如果你仅仅是update，是得不到他人的提交的；只有你首先从中心仓库中执行pull操作拉取到本地你的仓库后，你才能看到其他人的commit。其他人想要看到你的提交，有4个前提：</p> <ol><li>你成功提交了commit。</li> <li>你将commit push到了中心仓库。</li> <li>他们从中心仓库执行了pull操作。</li> <li>他们成功执行了update。</li></ol> <p>我们注意到，在分布式代码管理系统中，commit和update操作仅仅在本地仓库和你的working copy之间产生影响，不会影响其他人的仓库；而push和pull操作仅仅在本地仓库和中心仓库之间产生影响，而不会影响你的本地woking copy。</p> <h2 id="冲突（conflicts）"><a href="#冲突（conflicts）" aria-hidden="true" class="header-anchor">#</a> 冲突（Conflicts）</h2> <p>代码管理系统允许多个用户同时编辑自己的working copy。通常，代码管理系统能够自动处理两个不同用户对同一版本的commit。</p> <p>对于每一行代码，有以下几种情况：</p> <ul><li>如果两个用户都没有改变它，那么它保持原来的代码。</li> <li>如果其中一个用户改变了它，那么它变成改变后的代码。</li> <li>如果两个用户同时改变了它，并且改变的内容不同，那么冲突就产生了。</li></ul> <p>当产生冲突时，代码管理系统就无法自动帮我们处理了，因为它也不知道要使用谁的版本，那么这个时候就需要人工干预，决定如何处理这一行代码了。</p> <p>在分布式代码管理系统中，有一个明确的操作叫<code>merge</code>，用来将不同用户上做的改变加以合并。有时候，merge操作能够自动执行完毕，但是当遇到冲突时，merge会自动暂停并等待用户执行下一步操作。而在集中式代码管理系统中，每次执行update时，中心仓库中会隐形地执行merge操作。</p> <p>对于冲突，我们最理想的状态是避免它，而不是在发生后取解决它。下面的best practices给出了一些避免冲突的建议，例如开发者应该频繁地进行commit，而不是在大量改变内容后一次性执行commit。</p> <h2 id="合并（merge-changes）"><a href="#合并（merge-changes）" aria-hidden="true" class="header-anchor">#</a> 合并（Merge changes）</h2> <p>回想一下，update操作的目的是：将仓库中发生的改变同步到用户的woking copy中。</p> <p>在集中式的代码管理系统中，你可以在任何时刻（包括你在本地还有未提交的commit时）进行update操作。代码管理系统会将你的woking copy中未完成的commit与仓库中更新过来的commit进行自动的merge操作。这可能会使你在有时候不得不处理冲突，而且这也会使你的本地编辑发生改动，因为你现在只有merge后的版本了。这种隐形的merge操作是集中式代码管理系统中经常给用户带来困扰的地方。</p> <p>在分布式代码管理系统中，如果你在本地的woking copy中还有未提交的commit时，你不能执行update操作（或者像<code>git pull</code>这类包括update的操作）。理由是代码管理系统认为在你编辑还未完成的时候进行update操作只会带来麻烦。所以你会收到一个类似这样的错误提示：<code>abort: outstanding uncommitted changes</code>。</p> <p>如果你想要执行update操作，你必须首先将你所做的编辑全部commit提交掉。commit完成后，如果你想执行update操作，代码管理系统会提示你进行merge操作，因为此时你的本地仓库中的commit与中心仓库中即将update过来的commit之间是同步的关系。merge完毕后，将合并后的版本重新进行commit。这样，代码管理系统就包含了所有的版本变更的历史，既记录了你自己的commit详情，也记录了与其他更新进行merge过程的详情。</p> <h2 id="分支管理"><a href="#分支管理" aria-hidden="true" class="header-anchor">#</a> 分支管理</h2> <p>虽然代码管理工具的基本功能已经很优秀，但是当我们面对版本管理的时候，依然存在很大的挑战。我们知道大家工作在同一仓库中，那么彼此的代码协作必然带来很多问题和挑战，如下：</p> <ol><li>如何开始一个Feature的开发，而不影响别等Feature？</li> <li>由于很容易创建新分支，分支多了之后应该如何管理？时间久了，如何知道每个分支是干什么的？</li> <li>哪些分支已经合并到了主干？</li> <li>如何进行Release的管理？开始一个Release的时候，如何冻结Feature？如何在准备Release的时候，开发人员可以继续开发新的功能？</li> <li>线上代码出现bug了，如何快速修复（而且修复的代码要包含到开发人员的分支以及下一个Release）？</li></ol> <p>大部分开发人员在使用Git时就只是使用三个甚至两个分支，一个是Master，一个是Develop，还有一个基于Develop打得各种分支。这种模式在小项目的时候还能够勉强支撑，但是人员一多，项目周期一长，就会出现各种问题。</p> <h2 id="git-flow"><a href="#git-flow" aria-hidden="true" class="header-anchor">#</a> Git Flow</h2> <p>就像代码需要代码规范一样，代码管理同样需要清晰的流程和规范。</p> <p>Vincent Driessen 同学为了解决这个问题提出了 <a href="http://nvie.com/posts/a-successful-git-branching-model/" target="_blank" rel="noopener noreferrer">A Successful Git Branching Model<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>下面是Git Flow的流程图</p> <p><img src="https://images.cnblogs.com/cnblogs_com/cnblogsfans/771108/o_git-flow-nvie.png" alt="img"></p> <p>下面介绍Git Flow常用的分支</p> <ul><li>Production 分支</li></ul> <p>也就是我们经常使用的Master分支，这个分支最近发布到生产环境的代码，最近发布的Release， 这个分支只能从其他分支合并，不能在这个分支直接修改</p> <ul><li>Develop 分支</li></ul> <p>这个分支是我们是我们的主开发分支，包含所有要发布到下一个Release的代码，这个主要合并与其他分支，比如Feature分支</p> <ul><li>Feature 分支</li></ul> <p>这个分支主要是用来开发一个新的功能，一旦开发完成，我们合并回Develop分支进入下一个Release</p> <ul><li>Release分支</li></ul> <p>当你需要一个发布一个新Release的时候，我们基于Develop分支创建一个Release分支，完成Release后，我们合并到Master和Develop分支</p> <ul><li>Hotfix分支</li></ul> <p>当我们在Production发现新的Bug时候，我们需要创建一个Hotfix, 完成Hotfix后，我们合并回Master和Develop分支，所以Hotfix的改动会进入下一个Release</p> <h3 id="git-flow-如何工作？"><a href="#git-flow-如何工作？" aria-hidden="true" class="header-anchor">#</a> Git Flow 如何工作？</h3> <h4 id="master-分支"><a href="#master-分支" aria-hidden="true" class="header-anchor">#</a> Master 分支</h4> <p>所有在Master分支上的Commit应该Tag</p> <p><img src="https://images.cnblogs.com/cnblogs_com/cnblogsfans/771108/o_git-workflow-release-cycle-1historical.png" alt="img"></p> <h4 id="feature-分支"><a href="#feature-分支" aria-hidden="true" class="header-anchor">#</a> Feature 分支</h4> <p>分支名 feature/*</p> <p>Feature分支做完后，必须合并回Develop分支, 合并完分支后一般会删点这个Feature分支，但是我们也可以保留</p> <p><img src="https://images.cnblogs.com/cnblogs_com/cnblogsfans/771108/o_git-workflow-release-cycle-2feature.png" alt="img"></p> <h4 id="release-分支"><a href="#release-分支" aria-hidden="true" class="header-anchor">#</a> Release 分支</h4> <p>分支名 release/*</p> <p>Release分支基于Develop分支创建，打完Release分之后，我们可以在这个Release分支上测试，修改Bug等。同时，其它开发人员可以基于开发新的Feature (记住：一旦打了Release分支之后不要从Develop分支上合并新的改动到Release分支)</p> <p>发布Release分支时，合并Release到Master和Develop， 同时在Master分支上打个Tag记住Release版本号，然后可以删除Release分支了。</p> <p><img src="https://images.cnblogs.com/cnblogs_com/cnblogsfans/771108/o_git-workflow-release-cycle-3release.png" alt="img"></p> <h4 id="hotfix-分支"><a href="#hotfix-分支" aria-hidden="true" class="header-anchor">#</a> HotFix 分支</h4> <p>分支名 hotfix/*</p> <p>hotfix分支基于Master分支创建，开发完后需要合并回Master和Develop分支，同时在Master上打一个tag</p> <p><img src="https://images.cnblogs.com/cnblogs_com/cnblogsfans/771108/o_git-workflow-release-cycle-4maintenance.png" alt="img"></p> <h2 id="参考博客"><a href="#参考博客" aria-hidden="true" class="header-anchor">#</a> 参考博客</h2> <p><a href="https://nvie.com/posts/a-successful-git-branching-model" target="_blank" rel="noopener noreferrer">A successful git branching model<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow" target="_blank" rel="noopener noreferrer">Gitflow Workflow | Atlassian Git Tutorial<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://www.cnblogs.com/wish123/p/9785101.html" target="_blank" rel="noopener noreferrer">Git 在团队中的最佳实践--如何正确使用Git Flow<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/wiki/devops/DevOps之团队结构.html" class="prev">
          DevOps 团队结构
        </a></span> <span class="next"><a href="/wiki/devops/jenkins-installation.html">
          Jenkins安装与配置
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/wiki/assets/js/app.c421db3b.js" defer></script><script src="/wiki/assets/js/2.6eab3bcd.js" defer></script><script src="/wiki/assets/js/29.0beb3286.js" defer></script>
  </body>
</html>
